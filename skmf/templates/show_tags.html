{% extends "layout.html" %}
{% block body %}
  <!-- Begin body block in template show_tags.html -->
  <form action="{{ url_for('show_tags') }}" method=post class=add-entry>
    {{ query_form.hidden_tag() }}
    <dl>
      <dt>Find existing connections</br></br>
      <dd>
        <table>
          <tr>
            <td>{{ query_form.free_res(size=15) }}
            <td>{{ query_form.free_conn(size=15) }}
            <td>{{ query_form.free_target(size=15) }}
          </tr>
          <tr>
            <td>{{ query_form.resource }}
            <td>{{ query_form.connection }}
            <td>{{ query_form.target }}
          </tr>
        </table>
      <dd>{{ query_form.submit }}
    </dl>
  </form>
  {% if entries %}
    <table>
      <tr>
        {% for label in entries[0] %}
          <th>{{ label }}</th>
        {% endfor %}
      </tr>
      {% for entry in entries %}
        <tr>
          {% for label in entry %}
            <td>{{ entry[label]['value'] }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <li><em>Unbelievable. No tags here so far.</em>
  {% endif %}
  {% if current_user.is_authenticated %}
    <form action="{{ url_for('add_tag') }}" method=post class=add-entry>
      {{ insert_form.hidden_tag() }}
      {#<table>
        <tr><td>{{ insert_form.category.label }}:</td></tr>
      {% for subfield in insert_form.category %}
        <tr>
          <td>{{ subfield }}</td>
          <td>{{ subfield.label }}</td>
        </tr>
      {% endfor %}
      </table>#}
      <dl>
        <dt>Add a resource or type of connection</br></br>
        <dt>{{ insert_form.category.label }}:
        {% for subfield in insert_form.category %}
          <dd>{{ subfield }}&nbsp;{{ subfield.label }}
        {% endfor %}
        <dt>{{ insert_form.label.label }}:
        <dd>{{ with_errors(insert_form.label) }}
        <dt>{{ insert_form.description.label }}:
        <dd>{{ with_errors(insert_form.description) }}
        <dd>{{ insert_form.submit }}
      </dl>
    </form>
  {% endif %}
  {#<ul class=entries>
  {% for entry in entries['results']['bindings'] %}
    <li><h2>{{ entry['label']['value'] }}</h2>{{ entry['description']['value'] }}
  {% else %}
    <li><em>Unbelievable. No tags here so far.</em>
  {% endfor %}
  </ul>#}
  <!-- End body block in template show_tags.html -->
{% endblock %}
